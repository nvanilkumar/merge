

/*** cnvyr.min.js ***/
$(document).ready(function(){var b=false;$("#promoButton").click(function(c){$("#addPromoterForm").validate();if($("#addPromoterForm").valid()){b=true;$("#addPromoterForm").submit()}else{return false}});$("#addPromoterForm").validate({rules:{promoterName:{required:true,promoterName:true,maxlength:25},promoterEmail:{required:true,email:true},promoterCode:{required:true,defaultCheck:true,maxlength:25},orgPromoteURL:{required:false,url:true}},messages:{promoterName:{required:"Please enter promoter name",maxlength:"Please enter not more than 25 characters"},promoterEmail:{required:"Please enter promoter email",email:"Please enter valid email"},promoterCode:{required:"Please enter promoter code",maxlength:"Please enter not more than 25 characters"},orgPromoteURL:{url:"Please enter valid URL"}}});$("#promoterCode").change(function(){var c=$("#promoterCode").val();if(c==0&&c!=""){$("#codeError").text("Promoter code should not be zero");b=false;return false}else{$("#codeError").text(" ");b=true}});$.validator.addMethod("promoterName",function(d,c){return this.optional(c)||/^[a-zA-Z0-9]+$/.test(d)},"Letters and numbers are allowed");$.validator.addMethod("defaultCheck",function(e,d){var c=false;if(e.toLowerCase()=="organizer"||e.toLowerCase()=="meraevents"){c=false}else{c=true}return this.optional(d)||c},"Organizer, meraevents are predefined words, you cant use them");var a=1;$("#promoterCode,#orgPromoteURL").blur(function(){updateLinks()});$("#promoterCode, #orgPromoteURL").keyup(function(){updateLinks()});$(".read-more").click(function(){$("#moreContent").css("display","block");$(".read-more").css("display","none");$(".view-less").css("display","block")});$(".view-less").click(function(){$("#moreContent").css("display","none");$(".read-more").css("display","block");$(".view-less").css("display","none")})});function updateLinks(){var a=$("#promoterCode").val();var b=$("#orgPromoteURL").val();if(a==null||a.length==""){$("#promoterUrl").text(eventURL);$("#iframeCode").text('<iframe width="100%" height="600px" src="'+iframeURL+'"></iframe>')}else{if(b.length>0){var c="&";console.log(b.indexOf("?"));if(b.indexOf("?")<0){c="?"}promoterUrl=b+c+"meprcode="+a;promoterUrl=promoterUrl+"\n(or)\n";promoterUrl=promoterUrl+eventURL+"?ucode="+a}else{promoterUrl=eventURL+"?ucode="+a}iframeCode=iframeURL+"&ucode="+a;$("#promoterUrl").text(promoterUrl);$("#iframeCode").text('<iframe width="100%" height="600px" src='+iframeCode+"></iframe>")}}function getcheckedcommissions(){var c=new Object();var b=new Object();var d=[];$(".enableDisable").each(function(){var l=$(this).attr("salesDone");if(!$(this).is(":checked")||l==1){var j=$(this).parents("tr").find('input[type="text"]');$.each(j,function(m,n){if(n.value.length<=0||l==1){$(n).attr("disabled","disabled")}else{$(n).removeAttr("disabled")}});if(l==1){$(this).parents("tr").find('input[type="radio"]').attr("disabled","disabled")}}else{$(this).parents("tr").find('input[type="text"]').removeAttr("disabled");$(this).parents("tr").find('input[type="radio"]').removeAttr("disabled")}var i=$(this).attr("name");i=i.replace("status","");var f=parseInt(i,10);if($(this).is(":checked")){var h=$("#referrercommission"+f).val();var g=$("#referrercommission"+f).attr("name");var e=$("#receivercommission"+f).val();var k=$("#receivercommission"+f).attr("name");d.push(g);d.push(k)}});$(".mandatory_class").each(function(){var e=this.name;if($.inArray(e,d)!=-1){c[this.name]={required:true,number:true,checkComm:true};b[this.name]={min:"Commission value should be greater than zero",required:"Commission value is Required",checkComm:"Commission should not be greater than 100%"}}});$.validator.addMethod("checkComm",function(h,g){var j=true;var i=Number(g.id.match(/\d+/));var f=$("#referrercommission"+i).val();var e=$("#receivercommission"+i).val();if($('input[name="type'+i+'"]:checked').val()=="percentage"&&(Number(f)+Number(e))>100){j=false}return j});var a=$("#viralTicket").get(0);$.removeData(a,"validator");$("#viralTicket").validate({rules:c,messages:b})}getcheckedcommissions();$(".enableDisable").click(function(){getcheckedcommissions()});function changeStatus(b){var a=api_promotesetStatus;$.ajax({url:a,type:"POST",data:{id:b},headers:{Authorization:"bearer 930332c8a6bf5f0850bd49c1627ced2092631250"},cache:false,dataType:"json",success:function(f,e,c){var d=f.response.promoterStatus;console.log(d);if(d==1){$("#"+b).removeClass("btn orangrBtn");$("#"+b).addClass("btn greenBtn");$("#"+b).text("active")}else{$("#"+b).removeClass("btn greenBtn");$("#"+b).addClass("btn orangrBtn");$("#"+b).text("inactive")}},error:function(d,c,e){console.log(d)}})}function deleteDiscount(b){var a=confirm("Are you sure you want to delete this discount!!!");if(a==true){window.location=b}}$(function(){var a=JSON.parse($("#radioFieldname").val());$.each(a,function(c,b){customRadio("type"+b)})});