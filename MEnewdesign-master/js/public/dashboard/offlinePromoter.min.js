

/*** cnvyr.min.js ***/
var valid=true;$("#offlinePromoter").on("submit",function(a){a.preventDefault();$(".child").each(function(){if(!$('[type="checkbox"]:checked',this).length){valid=false}else{valid=true}});if(valid){$("#checkboxErrorDiv #ticketCheckboxError").text(" ")}else{$("#checkboxErrorDiv #ticketCheckboxError").text("Please select atleast one ticket")}});$("#offlinePromoter").validate({rules:{promoterName:{required:true},promoterEmail:{email:100,required:true},promoterMobile:{required:true,number:true,minlength:10,maxLen:10},ticketslimit:{number:true}},messages:{promoterName:{required:"Please enter  Name"},promoterEmail:{required:"Please enter valid Email."},promoterMobile:{required:"Please enter Mobile Number."},ticketslimit:{required:"Please enter Number."}},submitHandler:function(a){if($("#offlinePromoter").valid()&&valid){a.submit()}}});jQuery.validator.addMethod("maxLen",function(b,a,c){if($(a).val().length>c){return false}else{return true}},"Mobile number cannot be more than 10 characters");$("#event").change(function(){$("#dvLoading").show();var b=$(this).val();var d=$("option:selected",this).attr("promoterId");var a=api_promoteofflineTickets;var c=$.ajax({url:a,headers:{Authorization:"bearer 930332c8a6bf5f0850bd49c1627ced2092631250"},type:"GET",data:{id:d,eventId:b},dataType:"json",cache:false});c.done(function(e){$("#dvLoading").hide();var f=e.response.eventTickets;$("#ticket").empty();if(f.length>0){$("#ticket").append($("<option></option>").attr("value","").text("Select Ticket"));f.forEach(function(g){$("#ticket").append($("<option></option>").attr("value",g.ticketid).text(g.ticketname))})}});c.fail(function(e){$("#dvLoading").hide();$("html, body").animate({scrollTop:0},0);$("#offlineFlashError").text("There Is No Tickets For This Event");$("#offlineFlashError").css("display","block").delay(5000).fadeOut("slow");$("#ticket").empty();$("#ticket").append($("<option></option>").attr("value","").text("Select Ticket"));$("#quantity").empty();$("#total").html("");$("#quantity").append($("<option></option>").attr("value","").text("Select Quantity"))})});$("#ticket").change(function(){$("#dvLoading").show();var e=$("#event option:selected").attr("promoterId");var b=$("#event").val();var d=$(this).val();var a=api_promoteticketsData;var c=$.ajax({url:a,headers:{Authorization:"bearer 930332c8a6bf5f0850bd49c1627ced2092631250"},type:"GET",data:{id:e,ticketId:d,eventId:b},dataType:"json",cache:false});c.done(function(f){$("#dvLoading").hide();var k=f.response.ticketName["0"]["minorderquantity"];var j=f.response.ticketName["0"]["maxorderquantity"];var h=f.response.ticketName["0"]["finalQty"];var g=f.response.ticketName["0"]["price"];var i;$("#quantity").empty();$("#total").html("");$("#quantity").append($("<option></option>").attr("value","").text("Select Quantity"));for(i=k;i<=h;i++){$("#quantity").append($("<option></option>").attr("price",g).attr("value",i).text(i))}if(h=="0"){$("html, body").animate({scrollTop:0},0);$("#offlineFlashError").text("There Is No Tickets For This Event");$("#offlineFlashError").css("display","block").delay(5000).fadeOut("slow")}})});$("#offlinebooking").validate({rules:{name:{required:true},email:{required:true,email:true},mobile:{required:true,number:true,minlength:10,maxLen:10},eventId:{required:true},ticketId:{required:true},quantity:{required:true}},messages:{name:{required:"Please enter  name"},email:{required:"Please enter  email",email:"Please enter valid email"},mobile:{required:"Please enter mobile number",maxlength:"Please enter valid mobile number"},eventId:{required:"Please select event"},ticketId:{required:"Please select ticket"},quantity:{required:"Please select quantity"}},submitHandler:function(a){offlineBooking()}});function offlineBooking(){$("#dvLoading").show();var a=$("#event").val();var e=$("#ticket").val();var d=$("#event option:selected").attr("promoterId");var f=$("#quantity").val();var j=$("#total").val();var g=$("#quantity option:selected").attr("price");var c=$("#name").val();var h=$("#email").val();var b=$("#mobile").val();var k=$("#discountCode").val();var i=(f*g);$.ajax({url:api_bookingOfflineBooking,type:"POST",data:{eventId:a,price:g,ticketId:e,totalamount:i,email:h,mobile:b,name:c,quantity:f,discountCode:k,promoterId:d},headers:{Authorization:"bearer 930332c8a6bf5f0850bd49c1627ced2092631250"},cache:false,dataType:"json",success:function(l){$("#dvLoading").hide();$("html, body").animate({scrollTop:0},0);$("#offlineFlashSuccess").text(l.response.messages[0]);$("#offlineFlashSuccess").css("display","block").delay(5000).fadeOut("slow");$(".totalAmount").html("");document.getElementById("offlinebooking").reset()},error:function(m){$("#dvLoading").hide();$("html, body").animate({scrollTop:0},0);$("#offlineFlashError").text(m.responseJSON.response.messages[0]);$("#offlineFlashError").css("display","block").delay(5000).fadeOut("slow");$(".totalAmount").html("");document.getElementById("offlinebooking").reset();var l=$("#offlinebooking").get(0);$.removeData(l,"validator")
}})}$("#quantity").change(function(){offlineCalculate()});function offlineCalculate(){var c={};var b=$("#event").val();var f=$("#ticket").val();var h=$("#quantity").val();var d=$("#ticket").val();var l=$("#discountCode").val();var e=$("#event option:selected").attr("promoterId");c[d]=h;var m={eventId:b};m.ticketArray=c;if((l)!==""){m.discountCode=l}if((e)!==""){m.promoterId=e}var g=api_getTicketCalculation;var a="POST";var j="JSON";if(h==""){alert("Please choose ticket quantity");return false}function k(n){var p=n.response.calculationDetails;var q=p.totalPurchaseAmount;if(p.extraCharge.hasOwnProperty("totalAmount")){var o=parseInt(p.extraCharge.totalAmount);if(o>0){q=q-o}}$("#total").html(q).append(".00 ").append(p.currencyCode);$("#total").show()}function i(n){k(n.responseJSON);$("#discountCode").val("");alert(n.responseJSON.response.messages)}getPageResponse(g,a,m,j,k,i)}$("#cancel").click(function(){$("#discountCode").val("");offlineCalculate()});$("#guestlistbooking").validate({rules:{ticketId:{required:true},csvfile:{required:true}},messages:{ticketId:{required:"Please Select TIcket"},csvfile:{required:"Please upload csv file"}},submitHandler:function(a){if($("#guestlistbooking").valid()){a.submit()}return false}});$(function(){$(".showOrHideDiscCodes").click(function(){var a=$(this).val();$("#dicountBox"+a).hide();if($(this).prop("checked")==true){$("#dicountBox"+a).show()}else{$("input[name='ticketDiscount"+a+"[]']").each(function(){$(this).prop("checked",false)})}});customCheckbox("ticketDiscount")});function customCheckbox(a){var b=$('input[name^="'+a+'"]');$(b).each(function(){$(this).wrap("<span class='custom-checkbox'></span>");if($(this).is(":checked")){$(this).parent().addClass("selected")}});$(b).click(function(){$(this).parent().toggleClass("selected")})};