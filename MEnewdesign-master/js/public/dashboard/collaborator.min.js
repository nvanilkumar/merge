

/*** cnvyr.min.js ***/
$(document).ready(function(){customCheckbox("module[]");$('button[name="cancel"]').on("click",function(a){a.preventDefault();window.location.href=site_url+"dashboard/collaborator/collaboratorlist/"+$("#eventId").val()});$("#addCollaborator").validate({rules:{name:{required:true,validateName:true,maxlength:25},email:{required:true,email:true},mobile:{number:true,minlength:10,maxLen:10},"module[]":{required:true}},messages:{name:{required:"Please enter name",maxlength:"Please enter not more than 25 characters"},email:{required:"Please enter email",email:"Please enter valid email"},mobile:{required:"Please enter valid phone number"},"module[]":{required:"Please choose atleast one module"}},errorElement:"label",errorPlacement:function(a,b){if(b.attr("name")=="module[]"){$("#modulesErr").html(a)}else{a.insertAfter(b)}},submitHandler:function(c){if($(c).valid()){var b=$("#eventId").val();var f=$("#collaboratorId").val();var h="";h="eventid="+b+"&name="+c.name.value+"&email="+c.email.value+"&mobile="+encodeURIComponent(c.mobile.value);var g=$(".module");$.each(g,function(k,l){if(l.checked==true){h+="&"+l.value+"=1"}else{h+="&"+l.value+"=0"}});var d=api_collaboratorAdd;if(f>0){h+="&collaboratorid="+f;d=api_collaboratorUpdate}var a="POST";var i="JSON";function j(k){if(k.response.collaboratorData&&k.response.collaboratorData.addedStatus){window.location.href=site_url+"dashboard/collaborator/collaboratorlist/"+b}else{if(k.response.collaboratoraccessData&&k.response.collaboratoraccessData.updateStatus){window.location.href=site_url+"dashboard/collaborator/collaboratorlist/"+b}else{alert("Something went wrong.")}}}function e(k){$("#collaborator_email").text(k.responseJSON.response.messages).css("display","block").slideUp(10000)}getPageResponse(d,a,h,i,j,e)}else{return false}}});jQuery.validator.addMethod("maxLen",function(b,a,c){if($(a).val().length>c){return false}else{return true}},"Mobile number cannot be more than 10 characters");$.validator.addMethod("validateName",function(b,a){return this.optional(a)||/^[a-zA-Z0-9\s.]+$/.test(b)},"Letters and numbers are allowed");$.validator.addMethod("moduleSelected",function(b,a,c){if($(".module:checkbox:checked").length>0){return true}else{return false}},"You must select at least one module");$(".status").on("click",function(){var c=this;$(c).prop("disabled",true);var e=$("#eventId").val();var b="eventid="+e+"&collaboratorid="+this.collaboratorId+"&field=status";var f=api_collaboratorUpdateStatus;var h="POST";var g="JSON";function d(i){console.log(i);if(i.response.total>0){if(i.response.collaboratorData.value==1){$(c).text("show");$(c).removeClass("orangrBtn");$(c).addClass("greenBtn")}else{$(c).text("hide");$(c).removeClass("greenBtn");$(c).addClass("orangrBtn")}}$(c).prop("disabled",false)}function a(i){alert(i.responseJSON.response.messages.message[0]);$(c).prop("disabled",false)}getPageResponse(f,h,b,g,d,a)})});$(".module").on("change",function(){if(this.checked&&this.value=="manage"){$('.module[value="promote"]').prop("checked",true);$('.module[value="promote"]').parent().addClass("selected");$('.module[value="report"]').prop("checked",true);$('.module[value="report"]').parent().addClass("selected")}else{if(!this.checked){$('.module[value="manage"]').prop("checked",false);$('.module[value="manage"]').parent().removeClass("selected")}}});