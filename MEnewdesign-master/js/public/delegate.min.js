

/*** cnvyr.min.js ***/
$(function(){$(".form-datepicker").datepicker({changeMonth:true,changeYear:true,yearRange:"-100:+20"});$(".localityAutoComplete").keypress(function(h){var f=$(this).attr("id");var g=f.split("_");$("#Country_"+g[1]).val("");$("#State_"+g[1]).val("");$("#City_"+g[1]).val("")});$(".localityAutoComplete").each(function(){var f=$(this).attr("id");var g=f.split("_");initialize(g[1])});$("#paynow").click(function(){$("#dvLoading").show();var h=$('input[name="paymentGateway"]:checked').val();wizrocket.event.push("Payment Selected",{"Payment Mode":h});$("#paymentGateway").val(h);var f=$('input[name="paymentGateway"]:checked').attr("id");$("#paymentGatewayId").val(f);$("#booking_message_div").empty();if($("#ticket_registration").valid()){var g=new FormData($("#ticket_registration")[0]);$.ajax({url:booking_saveData,type:"POST",data:g,headers:{Authorization:"bearer 930332c8a6bf5f0850bd49c1627ced2092631250"},cache:false,contentType:false,processData:false,dataType:"json",async:true,beforeSend:function(){$("#dvLoading").show()},success:function(p){$(".userIdTextbox").val(p.userId);$(".eventsignupTextbox").val(p.eventSignupId);if(p.status){console.dir(p.userDetails);var o=p.userDetails.name;var n=p.userDetails.email;var m=p.userDetails.mobile||p.userDetails.phone;var j=decodeURIComponent(getCookie("phoneCode"))||"+91";var l=p.userDetails.facebookid||"";if(p.signup==1){wizrocket.event.push("User Signedup",{});wizrocket.profile.push({Site:{Name:o,Email:n,Phone:j+m,FBID:l}})}else{wizrocket.profile.push({Site:{Name:o,Email:n,Phone:j+m,FBID:l}})}var k=p.addressStr;$(".primaryAddress").val(k);if(p.totalPurchaseAmount==0){var i=p.orderId;window.location.href=site_url+"confirmation?orderid="+i}else{if(p.seatingLayout){var i=p.orderId;window.location.href=site_url+"seating?orderid="+i}else{$("#"+h+"_frm").submit()}}}else{$("#booking_message_div").text(ret.message);$("html, body").animate({scrollTop:0},"slow");$("#dvLoading").hide();return false}},error:function(i){var j=i.responseJSON.response.messages;$("#booking_message_div").text(j);$("html, body").animate({scrollTop:0},"slow");$("#dvLoading").hide()}})}else{$("html,body").animate({scrollTop:$(".error:visible").eq(0).offset().top-30},"slow");$("#dvLoading").hide();return false}});$.validator.addMethod("alphabetsOnly",function(g,f){return this.optional(f)||g==g.match(/^[a-zA-Z]+$/)});$.validator.addMethod("alphaNumericOnly",function(g,f){return this.optional(f)||g==g.match(/^[a-zA-Z0-9]+$/)});var d=[];var b=[];$(".customValidationClass").each(function(){d[this.name]=new Object();b[this.name]=new Object()});$(".mandatory_class").each(function(){var f=$(this).attr("id").split("_");var g=$(this).attr("data-originalname");var i=f[0];if(i==""){i="This field"}var h=i.toLowerCase();if(h=="emailid"){d[this.name]={required:true,email:true};b[this.name]={required:g+" is required",email:"Please enter valid email"}}else{if(h=="mobileno"||h=="phoneno"){d[this.name]={required:true,number:true,minlength:10,maxlength:10};b[this.name]={required:g+" is required",number:"Please enter numbers only",minlength:"Please enter valid number",maxlength:"Please enter maximum 10 numbers only"}}else{if(h=="toastmaster"||h=="clubnameapplicableonlyformembers"){d[this.name]={required:true};b[this.name]={required:"Please Choose Club Name Applicable only for Members"}}else{d[this.name]={required:true};b[this.name]={required:g+" is required"}}}}});var c=parseInt($("#eventId").val());if($.inArray(c,customValidationEventIds)!=-1){var a='<div class="form-group"><p><label><input type="checkbox" class="" name="checkboxvalid" id="checkboxvalid" > I agree with the selected booking date </label><span class="checkboxvalid_Err" style="clear:both;display:block"></span></p></div>';$("#ticket_registration").append(a);d.checkboxvalid={required:true};b.checkboxvalid={required:"Confirm the Booking Dates"}}$(".customValidationClass").each(function(){var g=$(this).attr("data-customFieldId");var f=$(this).attr("id").split("_");var i=f[0];if(i==""){i="This field"}if(g==21){d[this.name]={required:true};b[this.name]={required:i+" is required"}}var h=$(this).attr("data-customvalidation");if(h==="ageValidation"){d[this.name]={required:true,min:12,number:true};b[this.name]={required:i+" is required"}}if(h==="age5Validation"){d[this.name]={required:true,min:5,number:true};b[this.name]={required:i+" is required"}}if(h==="sprintDobValidation"){$(".form-datepicker").datepicker("destroy");$(".form-datepicker").datepicker({changeMonth:true,changeYear:true,dateFormat:"dd/mm/yy",yearRange:"1950:2003",defaultDate:"01/01/2003"});$(".form-datepicker").attr("readOnly","true")}if(h==="bibMaxLength"){d[this.name]={required:true,maxlength:20};b[this.name]={required:i+" is required"}}if(h==="check_unique_mobile_emrg"){d[this.name]={required:true,check_unique_mobile_emrg:true};b[this.name]={required:i+" is required",check_unique_mobile_emrg:"Mobile number and Emergency contact number should not be same"}}if(h==="check_unique_mobile_alternate"){d[this.name]={required:true,check_unique_mobile_alternate:true};
b[this.name]={required:i+" is required",check_unique_mobile_alternate:"Mobile number and alternate contact number should not be same"}}if(h==="chkPromoCode"){d[this.name].chkPromoCode=true;b[this.name].chkPromoCode="Invalid Promo code"}if(h==="pmiValidation"){d[this.name].pmiValidation=true;b[this.name].pmiValidation="Invalid Membership code"}if(h==="tedx2016Validation"){d[this.name].tedx2016Validation=true}if(h==="toastmasterraido"){d[this.name]={required:true};b[this.name]="Please choose one option"}if(h==="validate_promocode"){d[this.name].validate_promocode=true;b[this.name].validate_promocode="Invalid promo code"}});$("*[data-customvalidation='toastmasterraido']").click(function(){var f=$(this).val();if($.trim(f)=="Toastmaster"){$(this).parents(".form-group").next().find('select[data-customvalidation="toasmasterlist"]').parent().show();$(this).parents(".form-group").next().find('select[data-customvalidation="toasmasterlist"]').addClass("required error")}else{if($.trim(f)=="Guest"){var g=$(this).parents(".form-group").next().find('select[data-customvalidation="toasmasterlist"]');g.parent().hide();g.rules("remove","required");g.removeClass("error required");g.val("")}}});$.validator.addMethod("chkPromoCode",function(k,i){var f=false;if(k.length>6){var l="POST";var h=site_url+"api/delegate_validations/checkPromoCode";var j="checkPromoCode=1&pcode="+k;var g=sendAjaxRequest(h,j,l);if(g.response=="valid"){f=true}}return f});$.validator.addMethod("check_unique_mobile_emrg",function(j,h){var m=$.trim(j);var l=$(h).attr("id");var k=true;var g=new Array;$(".customValidationClass").each(function(i,o){var n=$(o).attr("data-customvalidation");if(($(o).attr("id")!=l)&&(n=="check_unique_mobile_emrg")){var p=$(o).attr("id");g.push($("#"+p).val())}});for(var f in g){if(g[f]==m){k=false}}g.length=0;return k});$.validator.addMethod("check_unique_mobile_alternate",function(h,g){var k=$.trim(h);var j=true;var i=$(g).parents().eq(1).attr("class");var f=$("."+i).find('input[data-customvalidation="check_unique_mobile_emrg"]').val();if(f==k){j=false}return j});$.validator.addMethod("pmiValidation",function(j,g){var f=false;var i=$("#eventId").val();var h=j;var m=$.trim(j);var l=$(g).attr("id");if(isNaN(h)){return f}var k=false;$(".customValidationClass").each(function(o,q){var p=$(q).attr("data-customvalidation");if(($(q).attr("id")!=l)&&(p=="pmiValidation")){var n=$(this).val();if($.trim(n)==m){k=true}}});if(k){return f}if(h.length>5){$.ajax({url:site_url+"api/delegate_validations/checkPmiMemership",type:"POST",data:"eventId="+i+"&membershipId="+h,async:false,beforeSend:function(){$("#dvLoading").show()},success:function(n){$("#dvLoading").hide();if(n.response.total==1){f=true}},error:function(n){$("#dvLoading").hide()}})}return f},"Please enter valid booking id");$.validator.addMethod("tedx2016Validation",function(j,i){$.validator.messages.tedx2016Validation="Please enter your registered email id to proceed further";var f=false;var h=$("#eventId").val();var g=$.trim(j);var k=$(i).attr("id");if(validateEmail(g)){$.ajax({url:site_url+"api/delegate_validations/checkTedX2016Email",type:"POST",data:"eventid="+h+"&email="+g,async:false,beforeSend:function(){$("#dvLoading").show()},success:function(l){$("#dvLoading").hide();if(l.status=="error"){f=false;$.validator.messages.tedx2016Validation=l.response.message}else{if(l.status=="success"){f=true;tedXErrMsg=""}}},error:function(l){$.validator.messages.tedx2016Validation=l.response.message;$("#dvLoading").hide()}});return f}return f},$.validator.messages.tedx2016Validation);$.validator.addMethod("validate_promocode",function(i,h){if(i!=""){var g=sendAjaxRequest(api_eventPromoCodes,{eventid:$("#eventId").val(),promocode:i},"POST");var f=false;if(g.response.total>0){if(g.response.eventPromoCodesList[0].remainingquantity>=totalSaleTickets){f=true}}return f}else{return true}});$("#ticket_registration").validate({ignore:[],rules:d,messages:b,errorPlacement:function(h,i){var g=i.attr("id");var f=g.split("_");var j=["Country","State","City"];if($.inArray(f[0],j)!==-1&&$(".Locality_"+f[1]+"Err")[0]){$(".Locality_"+f[1]+"Err").html('<label for="Locality_'+f[1]+'" generated="true" class="error">Please enter valid Location</label>')}else{if(f[0]=="Locality"){if($("#"+g).val()==""){$(".Locality_"+f[1]+"Err").empty();h.appendTo($("."+f[0]+"_"+f[1]+"Err"))}}else{if(f[0]=="checkboxvalid"){h.appendTo(".checkboxvalid_Err")}else{h.appendTo($("."+f[0]+"_"+f[1]+"Err"))}}}}});var e=["checkbox","radio"];$(e).each(function(f,g){$('.paymentmode-section1 input[type="'+g+'"]').each(function(){$(this).wrap("<span class='custom-"+g+"'></span>");if($(this).is(":checked")){$(this).parent().addClass("selected")}});$('.paymentmode-section1 input[type="'+g+'"]').click(function(){if(g=="radio"){$(".custom-"+g).removeClass("selected")}$(this).parent().toggleClass("selected")})})});function autoFill(b){var a=$("#auto_fill_"+b).val();if(a!=""){$(".registration_field_group_"+a+' input[type="text"], .registration_field_group_'+a+" textarea, .registration_field_group_"+a+" select").each(function(){var d=$(this).attr("id");
var c=d.split("_");$("#"+c[0]+"_"+b).val($(this).val())});$(".registration_field_group_"+a+' input[type="checkbox"], .registration_field_group_'+a+' input[type="radio"]').each(function(){var d=$(this).attr("id");var c=d.split("_");$("#"+c[0]+"_"+b+"_"+c[2]).prop("checked",$(this).prop("checked"))})}else{$(".registration_field_group_"+b+' input[type="text"], .registration_field_group_'+b+" textarea, .registration_field_group_"+b+" select").val("");$(".registration_field_group_"+b+' input[type="checkbox"], .registration_field_group_'+b+' input[type="radio"]').prop("checked",false)}}function sendAjaxRequest(a,c,d){var b=0;$.ajax({type:d,url:a,async:false,data:c,success:function(e){b=e}});if(b!=0){return b}}var placeSearch,autocomplete;var componentForm={neighborhood:"long_name",premise:"long_name",route:"long_name",sublocality_level_1:"long_name",sublocality_level_2:"long_name",locality:"long_name",administrative_area_level_1:"long_name",country:"long_name"};function initialize(b){var d=new google.maps.Map(document.getElementById("Locality_"+b),{mapTypeId:google.maps.MapTypeId.ROADMAP});var a=(document.getElementById("Locality_"+b));d.controls[google.maps.ControlPosition.TOP_LEFT].push(a);var c=new google.maps.places.Autocomplete((a));google.maps.event.addListener(c,"place_changed",function(){var e=c.getPlace();fillInAddress(e,b)})}function fillInAddress(d,h){for(var l in componentForm){if($.inArray(l,j)>-1){document.getElementById(l).value="";document.getElementById(l).disabled=false}}if(d.length==0){return}var j=["route","sublocality_level_2","premise"];var f={};for(var g=0;g<d.address_components.length;g++){var k=d.address_components[g].types[0];if(componentForm[k]){var c=d.address_components[g][componentForm[k]];f[k]=c}}var a="";var e="";var b=f.country;if(f.administrative_area_level_1){a=f.administrative_area_level_1}else{a=b}if(f.locality){e=f.locality}else{if(a!=""){e=a}else{e=b}}if(document.getElementById("City_"+h)!=null){document.getElementById("City_"+h).value=e}if(document.getElementById("State_"+h)!=null){document.getElementById("State_"+h).value=a}if(document.getElementById("Country_"+h)!=null){document.getElementById("Country_"+h).value=b}}$(function(){$(".customValidationClass").each(function(a,c){var b=$(c).attr("data-customvalidation");if((b=="bookdatevalid")){var e=parseInt($(this).attr("ticketid"));var d=$(this).attr("id");if($.inArray(e,weekendTickets)!=-1){$(this).removeClass("hasDatepicker");$(this).datepicker({beforeShowDay:function(f){return[f.getDay()==0||f.getDay()==5||f.getDay()==6,""]},minDate:new Date()})}else{if($.inArray(e,weekdayTickets)!=-1){$(this).removeClass("hasDatepicker");$(this).datepicker({beforeShowDay:function(f){return[f.getDay()!=0&&f.getDay()!=6&&f.getDay()!=5,""]},minDate:new Date()})}else{$(this).removeClass("hasDatepicker");$(this).datepicker({minDate:new Date()})}}}})});function validateEmail(a){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)};